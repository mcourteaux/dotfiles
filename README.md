# My personal dotfiles

## Install instructions Ubuntu

 - sudo apt install git
 - git clone this repo
 - git submodule update --recursive --init
 - sudo apt install vim-gtk3 stow fasd zsh curl gconf2 gnome-tweak-tool build-essential cmake python3-dev silversearcher-ag libncurses-dev libz-dev xz-utils libpthread-workqueue-dev xclip i3status feh compton zathura xdotool playerctl ctags xsettingsd
 - Install latest (9.1+) neovim appimage as `~/.local/bin/nvim`.
 - `pip3 install pynvim`
 - To install emoji-keyboards support:
   - `sudo apt install fonts-emojione rofi xdotool xsel`
   - Download release from: https://github.com/fdw/rofimoji/releases
   - Install: `pip3 install rofimoji`
 - install linuxbrew
 - brew install fzf (yes yes yes)
 - install fd (.deb)
 - ~~dconf write /org/gnome/desktop/input-sources/xkb-options "['caps:escape']"~~
 - add option "caps:escape" to /etc/defaults/keyboard
 - gconftool-2 --set /apps/gnome-terminal/profiles/Default/font --type string "Fura Mono Regular Nerd Font 11"
 - stow stuff
 - chsh (/usr/bin/zsh)
 - vim +PlugInstall +qall
   - `pip3 install openai`
   - `echo "sk-...<openaikey>" > ~/.config/vim-chatgpt.key`
 - set font through Tweaks (search Nerd)
 - logout/login
 - base16_monokai
 - `sudo vim /etc/pulse/default.pa`, and comment `load-module module-suspend-on-idle`.

### Extra things to do for i3-gaps

```sh
sudo add-apt-repository ppa:kgilmer/speed-ricer
sudo apt-get install feh rofi i3lock i3status i3-gaps-wm picom pywal
sudo aptitude install fonts-emojione xdotool xsel
```

Create the file /usr/share/xsessions/i3-gaps.desktop:
```conf
[Desktop Entry]
Name=i3-gaps
Comment=This session logs you into i3
Exec=i3
TryExec=i3
Type=Application
DesktopNames=ubuntu:i3
X-Ubuntu-Gettext-Domain=i3
```

Kill `x-session-gdm` and log back in, with i3.

Rofimoji needs python3

    python3 -m pip install rofimoji

It's automatically added to your path.


## Install instructions macOS

 - brew install llvm
 - brew install fd fzf the-silver-searcher ctags

# Fixing the Keychron K2 under Linux

Set keyboard in Linux-mode (hardware switch).

    echo "options hid_apple fnmode=0 swap_opt_cmd=0" | sudo tee /etc/modprobe.d/hid_apple.conf
    sudo update-initramfs -u

And reboot. To do the same at runtime:

    echo 0 | sudo tee /sys/module/hid_apple/parameters/swap_opt_cmd
    echo 0 | sudo tee /sys/module/hid_apple/parameters/fnmode

To use Azerty:

    sudo dpkg-reconfigure keyboard-configuration

Fix locale:

    sudo dpkg-reconfigure locales

Potentially edit (generated by sudo update-locale LC_ALL=en_US.UTF-8):

    sudo vim /etc/default/locale

(Or at runtime)

    setxkbmap -layout be
