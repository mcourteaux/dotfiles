# My personal dotfiles

## Install instructions Ubuntu

 - sudo apt install git
 - git clone this repo
 - git submodule update --recursive --init
 - sudo apt install vim-gtk3 stow fasd zsh curl gconf2 gnome-tweak-tool build-essential cmake python3-dev silversearcher-ag libncurses-dev libz-dev xz-utils libpthread-workqueue-dev xclip i3status feh compton zathura xdotool playerctl ctags xsettingsd
 - Install latest (9.1+) neovim AppImage as `~/.local/bin/nvim`.
 - `pip3 install pynvim`
 - To install emoji-keyboards support:
   - `sudo apt install fonts-emojione rofi xdotool xsel`
   - Download release from: https://github.com/fdw/rofimoji/releases
   - Install: `pip3 install rofimoji`
 - [X11 only] add option "caps:escape" to /etc/defaults/keyboard
 - gconftool-2 --set /apps/gnome-terminal/profiles/Default/font --type string "Fura Mono Regular Nerd Font 11"
 - stow stuff
 - chsh (/usr/bin/zsh)
 - logout/login
 - `sudo vim /etc/pulse/default.pa`, and comment `load-module module-suspend-on-idle`.


## Install instructions macOS

 - brew install llvm
 - brew install fd fzf the-silver-searcher ctags

# Fixing the Keychron K2 under Linux

Set keyboard in Linux-mode (hardware switch) and put fnmode to 0 (NOT 2, that will fuck up Bluetooth).

    echo "options hid_apple fnmode=0 swap_opt_cmd=0" | sudo tee /etc/modprobe.d/hid_apple.conf

Update the initramfs:

 - For Ubuntu: `sudo update-initramfs -u`
 - For Fedora: `sudo dracut --force`

And reboot. To do the same at runtime:

    echo 0 | sudo tee /sys/module/hid_apple/parameters/swap_opt_cmd
    echo 0 | sudo tee /sys/module/hid_apple/parameters/fnmode

To use Azerty:

    sudo dpkg-reconfigure keyboard-configuration

Fix locale:

    sudo dpkg-reconfigure locales

Potentially edit (generated by sudo update-locale LC_ALL=en_US.UTF-8):

    sudo vim /etc/default/locale

(Or at runtime, only X11)

    setxkbmap -layout be
